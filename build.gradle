/*
 * This build file was auto generated by running the Gradle 'init' task
 * by 'lizhaoguang' at '16-11-30 下午2:10' with Gradle 3.2.1
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/3.2.1/userguide/tutorial_java_projects.html
 */

buildscript {
    ext.kotlin_version = '1.0.5-2'
    ext.jersey_version = '2.24.1'
    repositories {
        maven { url 'http://maven.aliyun.com/nexus/content/groups/public/' }
    }

    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
        classpath 'org.akhikhl.gretty:gretty:1.4.0'
    }
}

apply plugin: 'java'
apply plugin: 'kotlin'
apply plugin: 'idea'
apply plugin: 'application'
apply plugin: 'org.akhikhl.gretty'
mainClassName = "AppKt"

sourceCompatibility = 1.8

gretty {
    port = 8080
    contextPath = '/'
    servletContainer = 'jetty9'
//    recompileOnSourceChange = false     //禁止自动编译
//    reloadOnClassChange = false         //关闭自动重启
//    managedClassReload = true           //打开类自动加载（速度比自动重启快）
}

repositories {
    //jcenter()
	maven { url 'http://maven.aliyun.com/nexus/content/groups/public/' }
}

dependencies {
    // The production code uses the SLF4J logging API at compile time
    compile 'org.slf4j:slf4j-api:1.7.21'
	compile "org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version"
    compile "org.glassfish.jersey.containers:jersey-container-servlet:${jersey_version}"
    compile "org.glassfish.hk2:hk2-metadata-generator:2.5.0-b27"    //自动扫描注解 Service

    //providedCompile "javax.servlet:javax.servlet-api:3.1.0"
    // Declare the dependency for your favourite test framework you want to use in your tests.
    // TestNG is also supported by the Gradle Test task. Just change the
    // testCompile dependency to testCompile 'org.testng:testng:6.8.1' and add
    // 'test.useTestNG()' to your build script.
    testCompile 'junit:junit:4.12'
}
